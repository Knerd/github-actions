name: 🤖🏭 Build

on: 
  workflow_dispatch:
  pull_request: 
    branches:
      - main
      - develop
  workflow_run:
    workflows: [".👆🔖 Dispatch Next Minor Release"]
    types: 
      - completed

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - name: 🏗 Checkout branch 
        uses: actions/checkout@v2
        with:
          ref: ${{ github.event.workflow_run.head_sha }}
      - name: 📦 Install Packages 
        run: npm ci 
      - name: 🩻 Test 
        run: npm run test 
      - name: 🏭 Build Project
        run: npm run build